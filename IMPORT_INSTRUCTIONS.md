# Инструкция по импорту фраз из JSON файлов

## Шаг 1: Обновить схему базы данных

1. Откройте Supabase SQL Editor
2. Выполните SQL из файла `database/schema-update-movies.sql`:

```sql
ALTER TABLE phrases 
ADD COLUMN IF NOT EXISTS movie_title TEXT,
ADD COLUMN IF NOT EXISTS movie_character TEXT,
ADD COLUMN IF NOT EXISTS movie_year INTEGER;
```

Это добавит поля для информации о фильмах.

## Шаг 2: Импорт фраз

Запустите скрипт импорта:

```bash
cd "/Users/yes/Downloads/YES PROJECTS/FaloClaro/faloclaro-app"
node scripts/import-clusters.js
```

Скрипт:
- ✅ Прочитает все JSON файлы из папки `Clasters/`
- ✅ Создаст/обновит кластеры в базе данных
- ✅ Импортирует все фразы с переводами
- ✅ Добавит информацию о фильмах (для кластера 12)

## Шаг 3: Генерация IPA транскрипций (опционально)

После импорта можно добавить IPA транскрипции. Это можно сделать:
- Вручную через Table Editor
- Через отдельный скрипт (если создадите)
- Используя Google Cloud TTS API для получения фонетической информации

## Шаг 4: Генерация аудио (опционально)

Если нужно сгенерировать аудио для новых фраз:

```bash
# Обновите скрипт generate-audio-simple.js с новыми фразами
# Или используйте существующий процесс генерации
```

## Структура JSON файлов

Каждый JSON файл должен иметь структуру:

```json
{
  "cluster_id": 1,
  "cluster_name": "Название кластера",
  "language": "pt-PT",
  "translation_language": "ru",
  "phrases": [
    {
      "pt": "Португальский текст",
      "ru": "Русский перевод",
      "register": "neutral",
      "explicit": false,
      "movie": {  // Только для кластера 12
        "title_pt": "Название фильма",
        "original_title": "Original Title",
        "character": "Имя персонажа",
        "year": 1994
      }
    }
  ]
}
```

## Проверка импорта

После импорта:
1. Откройте приложение
2. Проверьте, что все кластеры отображаются
3. Откройте фразы - должны быть переводы
4. Для кластера 12 (фильмы) - проверьте отображение информации о фильме

## Отображение информации о фильме

В карточке фразы (страница плеера) для фраз из фильмов будет отображаться:
- Название фильма
- Год выпуска (если указан)
- Имя персонажа (если указано)

Всё это отображается под переводом в отдельном блоке.









